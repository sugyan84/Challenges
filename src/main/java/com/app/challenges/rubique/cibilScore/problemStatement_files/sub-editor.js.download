webpackJsonp_sub_editor([1],{"2Ipe":function(e,t,n){"use strict";function o(e){return d[e]}function r(e,t){var n=window.CodePlayer,o=window.setup_video,r=e.problem_slug,a=e.p_type_verbose;o({langs:JSON.stringify(e.langs_info.map(function(e){return e.id})),problem_slug:r,p_type_verbose:a},function(o){if("OK"==o.status){var r=o.lang_code_video_id_map;for(var a in r){var i=r[a].id,l=(0,c.getSessionId)(e,a);i&&(d[l]=new n(i,{animate_save:t})),s(a,e.private_url_hash,l)}}},{})}function a(e){var t=d[e];if(t){return t.finish_recording()}}function i(e,t,n,o,r){var a=d[e];a&&(a.enqueue_changeset(n,t,o,r),a.start_recording())}function s(e,t,n){var r=(0,c.getKey)(t,e,"delta"),a=(0,c.getKey)(t,e,"source"),i=(0,c.get_from_local_storage)(r),s=o(n);if(i){s.changeset_queue=s.changeset_queue.concat(i);var l=function(){(0,c.remove_from_local_storage)(r),(0,c.remove_from_local_storage)(a)};s.start_recording(100,l)}}Object.defineProperty(t,"__esModule",{value:!0}),t.getCodePlayerForSessionId=o,t.setUpCodePlayers=r,t.codePlayerFinishRecording=a,t.codePlayerEnqueueChangeset=i,t.savePreviousAnonChangeSets=s;var l=n("kX7f"),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c=n("bInE");window.AceDocument=u.default.acequire("ace/document").Document,window.SessionIdCodePlayerMap={};var d=window.SessionIdCodePlayerMap},A79w:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.SubEditor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("GiK3"),c=o(u),d=n("RH2O"),_=n("m/Dr"),p=o(_),h=n("WJ9Z"),f=n("bInE"),m=n("r6Ka"),g=n("d6GN"),v=n("Gh1z");n("NBbx"),n("RmHk");var b=window.CodeEditorText,y=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.swapShowInput=e._swapShowInput.bind(e),e.onCustomInputChange=e._onCustomInputChange.bind(e),e.onOtherBotUserChange=e._onOtherBotUserChange.bind(e),e.onClickOnSubmit=e._onClickOnSubmit.bind(e),e.onClickOnCompile=e._onClickOnCompile.bind(e),e.state={submission_id:null,is_polling:!1},e}return i(t,e),l(t,[{key:"hasStateInitialized",value:function(){return void 0!==this.props.sub_data}},{key:"componentDidMount",value:function(){var e=this;this.hasStateInitialized()||this.props.dispatch(m.actions.initSubEditor(this.props.root)),this.props.is_bot_problem&&this.props.is_authenticated&&jQuery.post(this.props.other_bot_users_url,function(t){e.props.dispatch(m.actions.updateOtherBotUsers(e.props.root,t))})}},{key:"componentWillReceiveProps",value:function(e){this.hasStateInitialized()&&1==this.props.sub_data.fetching_response&&0==e.sub_data.fetching_response&&(this.scroll_to_response=!0)}},{key:"componentDidUpdate",value:function(){if(this.scroll_to_response){this.scroll_to_response=!1;var e=null;if(e=this.props.sub_data.log_response?this.refs.log_response_container:this.refs.sub_response_container)if(this.props.assessment){var t=jQuery(".right-pane");t.animate({scrollTop:t.scrollTop()+jQuery(e).offset().top-t.offset().top-20},500,"linear")}else{var n=jQuery(e).closest(".code-editor-scroll-container");n.length>0?n.animate({scrollTop:jQuery(e).offset().top-20},500,"linear"):jQuery("body,html").animate({scrollTop:jQuery(e).offset().top-20},500,"linear")}}this.state.submission_id&&!this.state.is_polling&&((0,g.log_submission_state)(this.state.submission_id,v.TRACELOG_RESULT_DISPLAYED_STATE),this.setState({submission_id:null,is_polling:!1}))}},{key:"_swapShowInput",value:function(){this.props.dispatch(m.actions.swapShowInput(this.props.root))}},{key:"_onCustomInputChange",value:function(e){this.props.dispatch(m.actions.customInputChange(this.props.root,e.target.value))}},{key:"_onOtherBotUserChange",value:function(e){this.props.dispatch(m.actions.otherBotUserIdChange(this.props.root,e&&e.value))}},{key:"poll",value:function(e,t){var n=this;jQuery.post(e,function(o){if(n.props.dispatch(m.actions.fetchResponseSuccess(n.props.root,o,t)),(0,g.shouldPoll)(o))n.poll_timeout=setTimeout(n.poll.bind(n,e,t),1e3);else{n.setState({is_polling:!1});var r="";n.props.root_data&&(r=n.props.root_data.current_lang),n.props.dispatch(m.actions.updateCompilationMessage(n.props.root,o,r))}})}},{key:"_onClickOnCompile",value:function(){var e=this,t=this.props,n=t.root,o=t.sub_data,r=t.root_data,a=t.problem_slug,i=t.private_url_hash,s=t.p_type_verbose,l=t.dryrun_url;if(t.is_authenticated){var u=(0,f.getSourceData)(r),c=l,d={source:u.source,lang:r.current_lang,changeset_timestamp:u.last_edited,problem_slug:a,private_hash:i,input:o.input_text,p_type_v:s};this.fetchResponse(n,c,d,!0,function(t,n){return e.poll.bind(e,t,n)})}else(0,f.showLoginModal)()}},{key:"_onClickOnSubmit",value:function(){var e=this,t=this.props,n=t.root,o=t.root_data,r=t.problem_slug,a=t.private_url_hash,i=t.p_type_verbose,s=t.submit_url,l=t.is_authenticated,u=t.is_bot_problem;if(l){var c=(0,f.getSourceData)(o),d=s,_={source:c.source,lang:o.current_lang,changeset_timestamp:c.last_edited,problem_slug:r,private_hash:a,problem_type:i};if(u){var p=this.props.sub_data.current_other_bot_user_id;-1==p&&(p=0),_.user_id=p}this.setState({submission_id:null}),this.fetchResponse(n,d,_,!1,function(t,n){return e.poll.bind(e,t,n)})}else(0,f.showLoginModal)()}},{key:"fetchResponse",value:function(e,t,n,o,r){var a=this;this.props.dispatch(m.actions.fetchResponse(e,o)),this.props.submission_source&&(n=s({},n,{submission_source:this.props.submission_source})),this.poll_timeout&&clearTimeout(this.poll_timeout),jQuery.ajax({type:"POST",url:t,data:n,dataType:"text"}).done(function(t){var n;try{n=JSON.parse(t)}catch(e){Raven&&Raven.captureException(e,{extra:{origin:"compile or submit",data:t}})}if(a.props.dispatch(m.actions.fetchResponseSuccess(e,n.html,o)),a.setState({is_polling:!0}),!o){var i=n.submission_id;a.setState({submission_id:i||null})}(0,g.shouldPoll)(n.html)&&n.url&&(a.poll_timeout=setTimeout(r(n.url,o),1e3))}).error(function(e,t){window.global.checkAndShowServerError(e.status)})}},{key:"render",value:function(){if(!this.hasStateInitialized())return null;var e=this.props,t=e.sub_data,n=e.root_data,o=!1;n&&null!==n.current_lang&&!t.fetching_response&&(o=!0);var r=!0;!0===this.props.disable_custom_input&&(r=!1);var a="custom-input-trigger-"+this.props.private_url_hash,i="compile-test-button-"+this.props.private_url_hash,s="submit-button-"+this.props.private_url_hash,l=this.props,u=l.problem_id,d=l.problem_slug,_=l.p_type,f=l.p_type_verbose,m=l.private_url_hash,g=l.langs_info,y=l.langs_code_ajax_url,C=l.last_lang,E=l.is_authenticated,S=l.disable_paste,O=l.assessment,T=l.fav_lang,w=l.fav_lang_ajax_url,R=l.default_template_ajax_url,k=l.LAB_FL,I=l.LAB_FC,N=l.editor_theme,P=l.editor_min_lines,A=l.editor_max_lines,L=l.is_bot_problem,D="sub-editor new-submission-container-"+this.props.private_url_hash;O&&(D+=" assessment-sub-editor"),n&&n.is_full_screen&&(D+=" fullscreen-editor");var x=this.props.sub_data.other_bot_users.map(function(e){return{value:e.id,label:e.name}}),M=this.props.sub_data.current_other_bot_user_id,U=this.props.sub_data.compilation_messages||[];return c.default.createElement("div",{className:D},c.default.createElement(h.CodeEditor,{problem_id:u,problem_slug:d,p_type:_,p_type_verbose:f,private_url_hash:m,langs_info:g,langs_code_ajax_url:y,last_lang:C,is_authenticated:E,disable_paste:S,assessment:O,fav_lang:T,fav_lang_ajax_url:w,default_template_ajax_url:R,LAB_FL:k,LAB_FC:I,editor_theme:N,onClickOnSubmit:this.onClickOnSubmit,editor_min_lines:P,editor_max_lines:A,compilation_errors:U}),c.default.createElement("div",{className:"sub-editor-footer"},[o&&r&&!L?c.default.createElement("div",{className:"custom-input-container",key:"custom-input-container"},c.default.createElement("a",{id:a,className:"provide-custom-input-trigger regular inline-block",onClick:this.swapShowInput},c.default.createElement("i",{className:"fa fa-caret-square-o-"+(t.show_input?"up":"down")})," ",b.provideCustomInput),t.show_input?c.default.createElement("textarea",{className:"custom-input nice-textarea",value:t.input_text,onChange:this.onCustomInputChange}):null):null,o&&!L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement("button",{id:i,className:"compile-test-button button btn-blue",key:"compile-test-button",onClick:this.onClickOnCompile}," ",_==v.P_TYPE_SQL?b.compileSubmitForSQL:b.compileSubmit," "),c.default.createElement("button",{id:s,className:"submit-button button btn-green",key:"submit-button",onClick:this.onClickOnSubmit}," ",b.submit," ")):null,o&&L?c.default.createElement("div",{is:!0,class:"sub-editor-buttons-container","private-url-hash":this.props.private_url_hash,key:"sub-editor-buttons-container"},c.default.createElement(p.default,{className:"other-bot-user-select",autosize:!0,options:x,value:M,onChange:this.onOtherBotUserChange}),c.default.createElement("button",{id:s,className:"submit-button button play-game-button "+(null===M?"btn-inactive":"btn-blue"),key:"submit-button",onClick:this.onClickOnSubmit,disabled:null===M}," ",b.playText," ")):null,c.default.createElement("div",{className:"clear",key:"clear1"}),t.fetching_response?c.default.createElement("div",{className:"dots-loader ajax-loader",key:"loader"}):null,t.sub_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"sub-response",ref:"sub_response_container",dangerouslySetInnerHTML:{__html:t.sub_response}}):null,t.log_response?c.default.createElement("div",{className:"standard-margin submission-container",key:"log-response",ref:"log_response_container",dangerouslySetInnerHTML:{__html:t.log_response}}):null,c.default.createElement("div",{className:"clear",key:"clear2"})]))}}]),t}(c.default.PureComponent),C=function(e,t){var n=(0,f.getRoot)(t.p_type,t.problem_id);return{root:n,sub_data:e.sub_editors[n],root_data:e.code_editor.roots[n]}};t.SubEditor=(0,d.connect)(C)(y)},Gh1z:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.P_TYPE_SQL="q",t.TRACELOG_RESULT_DISPLAYED_STATE=120},H2Zf:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,d.createStore)(w,T,R);u.default.render(s.default.createElement(c.Provider,{store:n},s.default.createElement(h.SubEditor,t)),document.getElementById(e))}var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=n("GiK3"),s=o(i),l=n("O27J"),u=o(l),c=n("RH2O"),d=n("2KeS"),_=n("po9w"),p=o(_),h=n("A79w"),f=n("Mlu2"),m=o(f),g=n("Q9e5"),v=o(g),b=n("ncZi"),y=n("zp53"),C=o(y),E=n("XGVg"),S=o(E),O=n("r6Ka"),T=a({},m.default,C.default),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1];return t.type in b.ActionType?a({},e,{code_editor:(0,v.default)(e.code_editor,t)}):t.type in O.ActionType?a({},e,{sub_editors:(0,S.default)(e.sub_editors,t)}):e},R=(0,d.applyMiddleware)(p.default);window.renderSubEditor=r},Mlu2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={code_editor:{global_conf:{loaded:!1},roots:{}}}},NBbx:function(e,t){e.exports={"sub-editor":"sub-editor","editor-header":"editor-header","mobile-clear":"mobile-clear","editor-settings-button-container":"editor-settings-button-container","editor-settings-button":"editor-settings-button","editor-lang-select":"editor-lang-select","editor-save-trigger":"editor-save-trigger","setting-expand-box":"setting-expand-box","down-arrow":"down-arrow",active:"active","editor-options":"editor-options","editor-divider":"editor-divider","code-editor":"code-editor","ace-crimson-editor":"ace-crimson-editor",ace_gutter:"ace_gutter","ace-monokai":"ace-monokai",ace_editor:"ace_editor","cursor-position":"cursor-position","keybindings-text":"keybindings-text","sub-editor-footer":"sub-editor-footer","sub-editor-buttons-container":"sub-editor-buttons-container","compile-test-button":"compile-test-button","other-bot-user-select":"other-bot-user-select","play-game-button":"play-game-button","custom-input":"custom-input","autocomplete-suggestion":"autocomplete-suggestion","autocomplete-text":"autocomplete-text","sub-editor-credits-footer":"sub-editor-credits-footer","poweredby-text":"poweredby-text","go-full-screen":"go-full-screen","assessment-sub-editor":"assessment-sub-editor","fullscreen-editor":"fullscreen-editor","react-modal-overlay":"react-modal-overlay","react-modal-container":"react-modal-container","small-modal":"small-modal","regular-modal":"regular-modal","large-modal":"large-modal","modal-footer":"modal-footer","modal-content":"modal-content","modal-header":"modal-header","modal-close":"modal-close","fullscreen-problem-description":"fullscreen-problem-description","assessment-problem-description":"assessment-problem-description","flow-help":"flow-help","disable-vertical-scroll":"disable-vertical-scroll","initialize-editor":"initialize-editor"}},Q9e5:function(e,t,n){"use strict";function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){switch(t.type){case i.ActionType.INIT_CODE_EDITOR:for(var n=t.root,r=t.data,d=r.langs_info,_={},p=0;p<d.length;p++){_[d[p].id]={source:null,whole_source:null,last_edited:null,cursor_pos:{row:0,col:0},readonly_ranges:[]}}var h=e.global_conf;return e.global_conf.loaded||(h=a({},e.global_conf,{loaded:!0,current_keybindings:(0,c.get_last_keybindings)(),fav_lang:r.fav_lang,current_code_editor_theme:(0,c.get_last_code_editor_theme)()})),a({},e,{global_conf:h,roots:a({},e.roots,o({},n,a({},r,{current_lang:null,lang_source_map:_})))});case i.ActionType.SET_SOURCE_IN_CODE_EDITOR:for(var f=t.root,m=t.data,g=t.animate_save,v=a({},e.roots[f].lang_source_map),b=0;b<m.length;b++){var y=m[b],C=(0,c.getKey)(e.roots[f].private_url_hash,y.lang,"source"),E=(0,c.get_from_local_storage)(C);E&&(y.source=E.source),v[y.lang]=a({},v[y.lang],{source:(0,c.get_source_and_readonly_ranges)(y.source||"",[]),whole_source:y.source||"",last_edited:y.last_edited})}e=a({},e,{roots:a({},e.roots,o({},f,a({},e.roots[f],{lang_source_map:v})))}),e.roots[f].current_lang=(0,c.get_last_lang)(e.roots[f],e.global_conf);var S=e.roots[f];return S.is_authenticated&&(0,s.setUpCodePlayers)(S,g),e;case i.ActionType.CHANGE_SOURCE_IN_CODE_EDITOR:var O=(new Date).getTime(),T=t.root,w=t.source,R=t.delta,k=e.roots[T],I=k.lang_source_map,N=k.current_lang,P=I[N].whole_source,A=(0,c.getSessionId)(k,N);if(I=a({},I,o({},N,a({},I[N],{source:w,whole_source:(0,c.applyReadonlyRangesToSource)(w,(0,l.getOrCreateReadonlyRanges)(A)),last_edited:O}))),e=a({},e,{roots:a({},e.roots,o({},T,a({},e.roots[T],{lang_source_map:I})))}),k.is_authenticated){var L=(0,l.getOrCreateReadonlyRanges)(A);(0,s.codePlayerEnqueueChangeset)(A,P,R,(0,c.cloneReadonlyRanges)(L),O)}else{var D=(0,c.getKey)(k.private_url_hash,N,"delta"),x=(0,c.getKey)(k.private_url_hash,N,"source"),M=(0,c.getKey)(k.private_url_hash,"","lang"),U=(0,c.get_from_local_storage)(D),H={delta:R,source:w,timestamp:(new Date).getTime()};U?U.push(H):U=[H],(0,c.set_to_local_storage)(D,U);var j={source:w,lang:N,last_edited:(new Date).getTime()};(0,c.set_to_local_storage)(x,j),(0,c.set_to_local_storage)(M,N)}return e;case i.ActionType.CHANGE_CURRENT_LANG_IN_CODE_EDITOR:var F=t.root,B=t.lang;return a({},e,{roots:a({},e.roots,o({},F,a({},e.roots[F],{current_lang:B})))});case i.ActionType.CHANGE_CURRENT_KEYBINDINGS:var G=t.keybindings;return(0,c.set_to_local_storage)("keybindings",G),a({},e,{global_conf:a({},e.global_conf,{current_keybindings:G})});case i.ActionType.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:var K=t.fav_lang;return a({},e,{global_conf:a({},e.global_conf,{fav_lang:K})});case i.ActionType.SET_CURSOR_POSITION:var V=t.root,Q=t.row,z=t.col,q={row:Q,col:z},W=e.roots[V],$=W.current_lang,J=W.lang_source_map;return J=a({},J,o({},$,a({},J[$],{cursor_pos:q}))),a({},e,{roots:a({},e.roots,o({},V,a({},e.roots[V],{lang_source_map:J})))});case i.ActionType.CHANGE_FULL_SCREEN_MODE:var Y=t.root,X=t.is_full_screen;return a({},e,{roots:a({},e.roots,o({},Y,a({},e.roots[Y],{is_full_screen:X})))});case i.ActionType.CHANGE_CURRENT_THEME_IN_CODE_EDITOR:var Z=t.code_editor_theme;return(0,c.set_to_local_storage)(u.CODE_EDITOR_THEME_TOKEN,Z),a({},e,{global_conf:a({},e.global_conf,{current_code_editor_theme:Z})})}return e}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=r;var i=n("ncZi"),s=n("2Ipe"),l=n("yqcu"),u=n("yUpC"),c=n("bInE")},WJ9Z:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEditor=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n("vMAF"),c=o(u),d=n("GiK3"),_=o(d),p=n("RH2O"),h=n("cnj4"),f=o(h);n("kX7f"),n("R3yc"),n("y1DZ"),n("eKfU"),n("wnqS"),n("LH9O"),n("MSRa"),n("a80F");var m=n("yUpC"),g=n("s0pV"),v=n("ncZi"),b=n("bInE"),y=n("2Ipe"),C=n("yqcu"),E=n("cuEl"),S=window.CodeEditorText,O=(0,c.default)({FILE_UPLOAD_INIT:null,EDITOR_CODE_PASTE_INIT:null,EDITOR_CODE_PASTE_WAIT:null,EDITOR_CODE_AFTER_PASTE:null}),T=function(e){function t(){r(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.onSourceChange=e._onSourceChange.bind(e),e.onLangChange=e._onLangChange.bind(e),e.onThemeChange=e._onThemeChange.bind(e),e.onClickOnSave=e._onClickOnSave.bind(e),e.onCut=e._onCut.bind(e),e.onCopy=e._onCopy.bind(e),e.onPaste=e._onPaste.bind(e),e.onEditorCreation=e._onEditorCreation.bind(e),e.onSessionCreation=e._onSessionCreation.bind(e),e.onDocumentCreation=e._onDocumentCreation.bind(e),e.keyboardHandlerFunction=e._keyboardHandlerFunction.bind(e),e.onChangeKeybindingsForNormal=e._onChangeKeybindings.bind(e,null),e.onChangeKeybindingsForVim=e._onChangeKeybindings.bind(e,"vim"),e.onChangeKeybindingsForEmacs=e._onChangeKeybindings.bind(e,"emacs"),e.set_fav_lang=e._set_fav_lang.bind(e),e.set_default_template=e._set_default_template.bind(e),e.toggle_expand_box=e._toggle_expand_box.bind(e),e.onClickOnSettingButton=e._onClickOnSettingButton.bind(e),e.onCursorChange=e._onCursorChange.bind(e),e.onVimModeChange=e._onVimModeChange.bind(e),e.onUnload=e._onUnload.bind(e),e.handleFullScreenClick=e._handleFullScreenClick.bind(e),e.stopPropagationPreventDefault=e._stopPropagationPreventDefault.bind(e),e.aceCommands=[{name:"saveCode",bindKey:{win:"Ctrl-S",mac:"Command-S",sender:"editor|cli"},exec:function(){e.onClickOnSave()}}],e.codefileUpload=e._codefileUpload.bind(e),e.openCodeFile=e._openCodeFile.bind(e),e.onLangChangeOnUpload=e._onLangChangeOnUpload.bind(e),e.codeFileSubmit=e._codeFileSubmit.bind(e),e.codeFileEdit=e._codeFileEdit.bind(e),e.fileUploadModalClose=e._fileUploadModalClose.bind(e),e.state={is_open_expand_box:!1,vim_mode:"normal",file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1},e}return i(t,e),l(t,[{key:"_onUnload",value:function(e){var t=this.getCurrentSessionId(),n=(0,y.getCodePlayerForSessionId)(t);n&&n.is_recording_code_player&&(e.returnValue="You may loose all the unsaved changes!")}},{key:"_stopPropagationPreventDefault",value:function(e){e.stopPropagation(),e.preventDefault()}},{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.root,o=t.problem_id,r=t.problem_slug,a=t.p_type,i=t.p_type_verbose,s=t.private_url_hash,l=t.is_authenticated,u=t.langs_info,c=t.langs_code_ajax_url,d=t.last_lang,_=t.fav_lang,p=t.fav_lang_ajax_url,h=t.default_template_ajax_url,f=t.LAB_FL,m=t.LAB_FC,g=t.root_data;g&&g.is_full_screen&&jQuery(".problem-description").addClass("fullscreen-problem-description");var b=u.map(function(e){return e.id}).join(",");if(this.hasStateInitialized()||this.props.dispatch(v.actions.initCodeEditor(n,{problem_id:o,problem_slug:r,p_type:a,p_type_verbose:i,private_url_hash:s,is_authenticated:l,langs_info:u,last_lang:d,fav_lang:_,fav_lang_ajax_url:p,default_template_ajax_url:h,LAB_FL:f,LAB_FC:m})),this.isSourceLoaded()||jQuery.get(c,{langs:b},function(t){e.props.dispatch(v.actions.setSourceInCodeEditor(n,t.data,e.animateSave.bind(e)))}),document.addEventListener("click",this.toggle_expand_box,!1),window.addEventListener("beforeunload",this.onUnload),this.props.disable_paste){var y="code-editor-"+s,C=document.getElementById(y);C&&(C.addEventListener("copy",this.stopPropagationPreventDefault,!0),C.addEventListener("cut",this.stopPropagationPreventDefault,!0))}}},{key:"componentWillUnmount",value:function(){if(document.removeEventListener("click",this.toggle_expand_box,!1),window.removeEventListener("beforeunload",this.onUnload),this.props.disable_paste){var e="code-editor-"+this.props.private_url_hash,t=document.getElementById(e);t&&(t.removeEventListener("copy",this.stopPropagationPreventDefault),t.removeEventListener("cut",this.stopPropagationPreventDefault))}}},{key:"hasStateInitialized",value:function(){return void 0!==this.props.root_data}},{key:"isSourceLoaded",value:function(){return!!this.hasStateInitialized()&&null!==this.props.root_data.current_lang}},{key:"getCurrentLang",value:function(){return this.hasStateInitialized()?this.props.root_data.current_lang:null}},{key:"getCurrentLangName",value:function(){if(!this.hasStateInitialized())return null;for(var e=this.getCurrentLang(),t=0;t<this.props.langs_info.length;t++)if(this.props.langs_info[t].id==e)return this.props.langs_info[t].name}},{key:"getCurrentSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].source}},{key:"getCurrentWholeSource",value:function(){if(!this.isSourceLoaded())return"";var e=this.props.root_data;return e.lang_source_map[e.current_lang].whole_source}},{key:"getCurrentSessionId",value:function(){var e=this.props.root,t=this.getCurrentLang();return t?e+"-"+t:"default"}},{key:"getCurrentKeybindings",value:function(){return this.hasStateInitialized()?this.props.global_conf.current_keybindings:null}},{key:"getCurrentReadonlyRanges",value:function(){return(0,C.getOrCreateReadonlyRanges)(this.getCurrentSessionId())}},{key:"animateSave",value:function(e){var t=jQuery(this.refs.saveLink);!0===e?(t.html(S.savedText),t.css({"background-color":"yellow"}),t.animate({backgroundColor:"#e5e7e8"},1e3,function(){t.css("background-color","rgba(0, 0, 0, 0)")})):t.html(S.errorInSavingText),setTimeout(function(){t.fadeIn().html(S.saveText).fadeIn()},1e3)}},{key:"setUpReadonlyRangesOnDoc",value:function(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.start=e.createAnchor(o.start),o.end=e.createAnchor(o.end),o.end.$insertRight=!0}}},{key:"setUpReadonlyRangesOnSession",value:function(e,t){for(var n=0;n<t.length;n++){var o=t[n];e.addMarker(o,"ace-readonly-highlight")}}},{key:"does_selection_intersect",value:function(e,t){for(var n=this.refs.ace_editor.getSelectionRange(),o=0;o<e.length;o++){var r=e[o];if((t||n.start.row!=r.end.row||n.start.column!=r.end.column)&&n.intersects(r))return!0}return!1}},{key:"getCursorPosition",value:function(){if(this.isSourceLoaded()){var e=this.props.root_data;return e.lang_source_map[e.current_lang].cursor_pos}return{col:0,row:0}}},{key:"getCurrentTheme",value:function(){return this.props.global_conf.current_code_editor_theme||this.props.editor_theme||m.DEFAULT_CODE_EDITOR_THEME}},{key:"_onSourceChange",value:function(e,t){this.props.dispatch(v.actions.changeSourceInCodeEditor(this.props.root,e,t))}},{key:"_onLangChange",value:function(e){var t=e.target.value;this.props.dispatch(v.actions.changeCurrentLangInCodeEditor(this.props.root,t))}},{key:"_onThemeChange",value:function(e){this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.props.dispatch(v.actions.changeCurrentThemeInCodeEditor(this.props.root,e))}},{key:"_onCursorChange",value:function(e,t){this.props.dispatch(v.actions.setCursorPosition(this.props.root,e,t))}},{key:"_onVimModeChange",value:function(e){this.setState({vim_mode:e})}},{key:"_onClickOnSave",value:function(){if(this.isSourceLoaded()){var e=this.getCurrentSessionId();(0,y.codePlayerFinishRecording)(e)||this.animateSave(!0)}}},{key:"_onCut",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onCopy",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onPaste",value:function(){if(this.props.disable_paste)return!1;var e=this.getCurrentReadonlyRanges();return!this.does_selection_intersect(e,!1)}},{key:"_onEditorCreation",value:function(e){for(var t=["overwrite","removeline","duplicateSelection","togglecomment","toggleBlockComment","modifyNumberUp","modifyNumberDown","replace","copylinesup","movelinesup","copylinesdown","movelinesdown","del","backspace","cut_or_delete","removetolinestart","removetolineend","removewordleft","removewordright","indent","blockoutdent","blockindent","transposeletters","tolowercase","touppercase","splitIntoLines"],n=this,o=0;o<t.length;o++){var r=t[o],a=e.commands.byName[r];!function(t){e.commands.addCommand({name:t.name,bindKey:t.bindKey,exec:function(e){if(!n.does_selection_intersect(n.getCurrentReadonlyRanges(),!0)&&("del"!=t.name||n.can_delete(!1,!1)))return t.exec.call(this,e)}})}(a)}}},{key:"can_delete",value:function(e,t){var n=this.refs.ace_editor.editor.getSelectionRange(),o=n.end.row,r=n.end.column,a=this.refs.ace_editor.editor.getSession().getValue().split("\n");if(/^\r?$/.test(a[o].slice(r))||e)for(var i=this.getCurrentReadonlyRanges(),s=0;s<i.length;s++){var l=i[s];if(!t&&l.start.row==o+1)return!1;if(t&&l.end.row==o){if(o+1==a.length)return!1;if(i.some(function(e){return e.start.row==o+1}))return!1}}return!0}},{key:"_onDocumentCreation",value:function(e,t){this.setUpReadonlyRangesOnDoc(t,(0,C.getOrCreateReadonlyRanges)(e))}},{key:"_onSessionCreation",value:function(e,t){this.setUpReadonlyRangesOnSession(t,(0,C.getOrCreateReadonlyRanges)(e));var n=e.split("-");if(n.length>1){var o=n[n.length-1];t.lang=o}}},{key:"_keyboardHandlerFunction",value:function(e,t,n,o){if("vim"==this.getCurrentKeybindings()&&"insert"!=this.state.vim_mode){var r=String.fromCharCode(o);return("normal"==this.state.vim_mode&&"d"==r||"D"==r)&&!(!this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)&&this.can_delete(!0,!0))&&{command:"null",passEvent:!1}}return!(-1===t||o<=40&&o>=37)&&(this.does_selection_intersect(this.getCurrentReadonlyRanges(),!1)?{command:"null",passEvent:!1}:void 0)}},{key:"_onClickOnSettingButton",value:function(e){this.state.is_open_expand_box||(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),this.setState({is_open_expand_box:!0}))}},{key:"_toggle_expand_box",value:function(e){this.state.is_open_expand_box&&!jQuery.contains(this.refs.expand_box,e.target)&&this.setState({is_open_expand_box:!1})}},{key:"_onChangeKeybindings",value:function(e){this.props.dispatch(v.actions.changeCurrentKeybindings(this.props.root,e)),this.setState({is_open_expand_box:!1}),this.refs.ace_editor.focus(),this.setState({vim_mode:"normal"})}},{key:"_set_fav_lang",value:function(){var e=this,t=this.getCurrentLangName();jQuery.ajax({type:"POST",url:this.props.fav_lang_ajax_url,data:{lang:t}}).done(function(n){"OK"==n.status&&(window.addAlert(n.message),e.props.dispatch(v.actions.changeFavoriteLang(e.props.root,t)))}),this.setState({is_open_expand_box:!1})}},{key:"_set_default_template",value:function(){var e={code:this.getCurrentSource(),lang:this.getCurrentLang(),confirm:"confirm"};jQuery.ajax({type:"POST",url:this.props.default_template_ajax_url,data:e}).done(function(e){"confirm"==e.status?this.refs.confirm_set_favorite_code.click():"OK"==e.status&&window.addAlert(e.message)}),this.setState({is_open_expand_box:!1})}},{key:"_change_vim_mode",value:function(){}},{key:"componentDidUpdate",value:function(){switch(this.state.file_upload_state){case O.FILE_UPLOAD_INIT:this.state.code_file||this.setFileInState();break;case O.EDITOR_CODE_PASTE_INIT:this.setCodeInEditor();break;case O.EDITOR_CODE_AFTER_PASTE:this.afterCodePaste()}return!0}},{key:"_openCodeFile",value:function(){if(this.props.is_authenticated){if(!this.isSourceLoaded())return;this.refs.codeFile.click()}else(0,b.showLoginModal)()}},{key:"_codefileUpload",value:function(){this.setState({file_upload_state:O.FILE_UPLOAD_INIT,show_file_upload_modal:!0,code_file_lang:this.getCurrentLang()})}},{key:"_onLangChangeOnUpload",value:function(e){var t=e.target.value;return this.setState({code_file_lang:t}),!0}},{key:"_codeFileEdit",value:function(){this.setState({file_upload_state:O.EDITOR_CODE_PASTE_INIT})}},{key:"_codeFileSubmit",value:function(){this.setState({file_upload_state:O.EDITOR_CODE_PASTE_INIT,submitCode:!0})}},{key:"setFileInState",value:function(){var e=this.refs.codeFile,t=e.files[0],n=(0,b.getLangForFilePath)(t.name);return n&&(0,b.isLangAllowed)(n,this.props.root_data.langs_info)||(n=this.getCurrentLang()),this.setState({code_file:t,code_file_lang:n}),!0}},{key:"setCodeInEditor",value:function(){var e=this;this.props.dispatch(v.actions.changeCurrentLangInCodeEditor(this.props.root,this.state.code_file_lang));var t="",n=new FileReader;n.onload=function(){t=n.result,e.refs.ace_editor.setValue(t),e.setState({file_upload_state:O.EDITOR_CODE_AFTER_PASTE})},n.readAsText(this.state.code_file),this.setState({file_upload_state:O.EDITOR_CODE_PASTE_WAIT})}},{key:"afterCodePaste",value:function(){this.state.submitCode&&this.props.onClickOnSubmit(),this.fileUploadModalClose()}},{key:"_fileUploadModalClose",value:function(){this.refs.codeFile.value="",this.setState({file_upload_state:null,code_file:null,code_file_lang:null,show_file_upload_modal:!1,submitCode:!1})}},{key:"_handleFullScreenClick",value:function(){var e=this.props.root_data;e&&e.is_full_screen?this._restore():this._fullScreen(),this.props.dispatch(v.actions.toggleFullScreenMode(this.props.root,!e.is_full_screen)),this.setState({is_open_expand_box:!1})}},{key:"_fullScreen",value:function(){var e=this.props.assessment,t=this;jQuery("body").addClass("disable-vertical-scroll"),jQuery(".problem-description").addClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").removeClass("hidden"),jQuery(window).resize(function(){e&&jQuery(".assessment-sub-editor").hasClass("fullscreen-editor")&&t._handleAssessmentEditorHeight(!1)}),e&&t._handleAssessmentEditorHeight(!1),f.default.unbind("backspace"),f.default.on("backspace",null,function(){"TEXTAREA"!==document.activeElement.tagName&&t.handleFullScreenClick()}),"undefined"!=typeof isDocumentInFullscreen&&isDocumentInFullscreen()?f.default.unbind("esc"):f.default.on("esc",null,function(){t.handleFullScreenClick()})}},{key:"_restore",value:function(){var e=this.props.assessment;jQuery("body").removeClass("disable-vertical-scroll"),jQuery(".problem-description").removeClass("fullscreen-problem-description"),jQuery("#fullscreen-problem-title").addClass("hidden"),e&&this._handleAssessmentEditorHeight(!0),f.default.unbind("backspace"),f.default.unbind("esc")}},{key:"_handleAssessmentEditorHeight",value:function(e){if(e)jQuery(".assessment-sub-editor").css("height",""),jQuery(".assessment-problem-description").css("height","");else{var t=jQuery(window).height()-jQuery(".header").outerHeight();jQuery(".assessment-sub-editor").css("height",t),jQuery(".assessment-problem-description").css("height",t)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.langs_info,o=t.LAB_FL,r=t.LAB_FC,a=t.assessment,i=t.root_data,l=t.compilation_errors,u=this.isSourceLoaded(),c=this.getCurrentLang(),d=this.getCurrentLangName(),p=this.getCurrentSessionId(),h=this.getCurrentKeybindings(),f=this.getCursorPosition(),v=this.state.code_file_lang,y=this.getCurrentTheme(),O="";"insert"==this.state.vim_mode&&(O=" (Insert)");var T="setting-expand-box less-margin "+(this.state.is_open_expand_box?"block":"hidden"),w=null;r&&!a&&(w=_.default.createElement("a",{className:"set-favorite-code",onClick:this.set_default_template},_.default.createElement("li",null,S.setDefaultTemplateText)));var R=null;o&&(R=_.default.createElement("a",{className:"set-favorite-lang",onClick:this.set_fav_lang},_.default.createElement("li",null,S.setFavoriteLangText.format(d))));var k=[],I=this.getCurrentSource();if(u){var N={};if(k=(0,C.getOrCreateReadonlyRanges)(p,N),N.created){var P=this.getCurrentWholeSource();I=(0,b.get_source_and_readonly_ranges)(P,k)}}var A="fa fa-expand",L=S.goFullScreen;i&&i.is_full_screen&&(A="fa fa-compress",L=S.exitFullScreen);var D="code-editor-"+this.props.private_url_hash,x="editor-lang-select-"+this.props.private_url_hash,M="editor-save-trigger-"+this.props.private_url_hash,U=[];for(var H in l){var j=l[H];U.push(s({},j,{type:"error"}))}return _.default.createElement("div",{id:D,className:"code-editor"},_.default.createElement("div",{className:"editor-header"},a?null:_.default.createElement("span",{className:"file-upload-text light regular",dangerouslySetInnerHTML:{__html:S.writeOrUploadCode},onClick:this.openCodeFile}),_.default.createElement("div",{className:"hidden"},_.default.createElement("input",{type:"file",id:"codeFile",ref:"codeFile",onChange:this.codefileUpload,readOnly:!u})),_.default.createElement("div",{className:this.state.show_file_upload_modal?"":"hidden"},_.default.createElement("div",{className:"react-modal-overlay"},_.default.createElement("div",{className:"react-modal-container small-modal"},_.default.createElement("a",{className:"modal-close no-underline",title:"Close",onClick:this.fileUploadModalClose}),_.default.createElement("div",{className:"modal-header"},_.default.createElement("h4",{className:"dark large less-margin"},S.selectLanguageText)),_.default.createElement("hr",{className:"hr"}),_.default.createElement("div",{className:"modal-content"},_.default.createElement("div",{className:"light regular less-margin"},S.helpText),_.default.createElement("select",{className:" float-left nice-select",value:v||"lang",onChange:this.onLangChangeOnUpload.bind(this)},u?n.map(function(e){return _.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[_.default.createElement("option",{value:"lang",key:"lang"},S.SelectLanguage)])),_.default.createElement("div",{className:"modal-footer"},_.default.createElement("a",{className:"button btn-blue float-right close-modal-window edit-code",onClick:this.codeFileEdit.bind(this)},S.editText),_.default.createElement("a",{className:"float-right button btn-blue close-modal-window submit-code medium-margin-right",onClick:this.codeFileSubmit.bind(this)},S.submitText),_.default.createElement("div",{className:"clear"}))))),_.default.createElement("div",{className:"mobile-clear"}),_.default.createElement("div",{className:"editor-settings-button-container float-right"},_.default.createElement("div",{className:"editor-settings-button",onClick:this.onClickOnSettingButton},_.default.createElement("i",{className:"fa fa-cog"})),_.default.createElement("div",{className:"clear"}),_.default.createElement("div",{className:T,ref:"expand_box"},_.default.createElement("div",{className:"down-arrow"}),_.default.createElement("ul",{className:"no-margin"},_.default.createElement("div",{className:"medium-margin-left editor-options"},_.default.createElement("p",{className:"smaller weight-600 no-margin"},S.themeHeader),m.THEME_MAP.map(function(t,n){return _.default.createElement("a",{key:n,className:"float-left width-100 small"+(y==t.value?" active":""),onClick:e.onThemeChange.bind(null,t.value)},_.default.createElement("i",{className:"fa"+(y==t.value?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),_.default.createElement("span",{className:"less-margin-left"},t.name))}),_.default.createElement("div",{className:"clear"})),_.default.createElement("div",{className:"editor-divider"}),_.default.createElement("div",{className:"medium-margin-left editor-options"},_.default.createElement("p",{className:"smaller weight-600 no-margin"},S.editorThemeHeader),_.default.createElement("a",{className:"float-left width-100 small"+(h?"":" active"),onClick:this.onChangeKeybindingsForNormal},_.default.createElement("i",{className:"fa"+(h?" fa-circle-o":" fa-dot-circle-o"),"aria-hidden":"true"}),_.default.createElement("span",{className:"less-margin-left"},S.keybindingNormal)),_.default.createElement("a",{className:"float-left width-100 small"+("vim"==h?" active":""),onClick:this.onChangeKeybindingsForVim},_.default.createElement("i",{className:"fa"+("vim"==h?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),_.default.createElement("span",{className:"less-margin-left"},S.keybindingVim)),_.default.createElement("a",{className:"float-left width-100 small"+("emacs"==h?" active":""),onClick:this.onChangeKeybindingsForEmacs},_.default.createElement("i",{className:"fa"+("emacs"==h?" fa-dot-circle-o":" fa-circle-o"),"aria-hidden":"true"}),_.default.createElement("span",{className:"less-margin-left"},S.keybindingEmacs)),_.default.createElement("div",{className:"clear"})),_.default.createElement("div",{className:"editor-divider"}),R,w))),_.default.createElement("a",{id:"confirm-set-favorite-code",className:"show-modal hidden",target:"confirm-set-favorite-code-modal",ref:"confirm_set_favorite_code"}),_.default.createElement("div",{id:"confirm-set-favorite-code-modal",className:"modal-window small-modal"},_.default.createElement("div",{className:"modal-header"},S.updateDefaultTemplate),_.default.createElement("div",{className:"modal-content"},_.default.createElement("div",{className:"dark regular"},S.overWriteExistingTemplate)),_.default.createElement("div",{className:"modal-footer"},_.default.createElement("a",{href:"#",className:"link-3 float-left close-modal-window link-near-button"},S.takeMeBack),_.default.createElement("a",{className:"float-right button btn-blue close-modal-window set-favorite-code",id:"set-favorite-code",onClick:this.set_default_template.bind(this)},S.yes),_.default.createElement("div",{className:"clear"}))),_.default.createElement("a",{className:"go-full-screen editor-settings-button float-right less-margin-left",title:L,onClick:this.handleFullScreenClick},_.default.createElement("i",{className:A})),_.default.createElement("select",{id:x,className:"editor-lang-select nice-select",value:c||"lang",onChange:this.onLangChange},u?n.map(function(e){return _.default.createElement("option",{value:e.id,key:e.id},e.versioned_name)}):[_.default.createElement("option",{value:"lang",key:"lang"},S.selectLanguage)]),_.default.createElement("a",{id:M,className:"editor-save-trigger float-right regular",ref:"saveLink",onClick:this.onClickOnSave},S.save)),_.default.createElement(g.AceEditor,{annotations:U,mode:c?m.LANG_MODE_MAP[c]:"",theme:y,name:"code-ace-editor",ref:"ace_editor",keyboardHandler:this.getCurrentKeybindings(),sessionId:p,value:u?I:S.loading+"...",onChange:this.onSourceChange,commands:this.aceCommands,width:"100%",showPrintMargin:!1,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!!a,completer:c?(0,E.getCompleter)(c):null,tabSize:4,fontSize:15,showGutter:!0,readOnly:!u,onCut:this.onCut,onCopy:this.onCopy,onPaste:this.onPaste,onEditorCreation:this.onEditorCreation,onDocumentCreation:this.onDocumentCreation,onSessionCreation:this.onSessionCreation,keyboardHandlerFunction:this.keyboardHandlerFunction,minLines:this.props.editor_min_lines||25,maxLines:this.props.editor_max_lines||40,onCursorChange:this.onCursorChange,onVimModeChange:this.onVimModeChange,setOptions:{dragEnabled:!1}}),_.default.createElement("div",{className:"cursor-position light"},f.row+1,":",f.col+1),h?_.default.createElement("div",{className:"keybindings-text"},_.default.createElement("span",null,h+O)):null)}}]),t}(_.default.PureComponent);t.CodeEditor=(0,p.connect)(function(e,t){var n=t.p_type,o=t.problem_id,r=(0,b.getRoot)(n,o);return{global_conf:e.code_editor.global_conf,root:r,root_data:e.code_editor.roots[r]}})(T)},XGVg:function(e,t,n){"use strict";function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){switch(t.type){case s.ActionType.INIT_SUB_EDITOR:var n=t.root;return i({},e,r({},n,{show_input:!1,input_text:"",current_other_bot_user_id:-1,other_bot_users:[{id:-1,name:u.defaultBot}],fetching_response:!1,log_response:null,sub_response:null}));case s.ActionType.SUB_EDITOR_SWAP_SHOW_INPUT:var a=t.root;return i({},e,r({},a,i({},e[a],{show_input:!e[a].show_input})));case s.ActionType.SUB_EDITOR_CUTSOM_INPUT_CHANGE:var c=t.root,d=t.value;return i({},e,r({},c,i({},e[c],{input_text:d})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:var _=t.root,p=t.user_id;return i({},e,r({},_,i({},e[_],{current_other_bot_user_id:p})));case s.ActionType.SUB_EDITOR_OTHER_BOT_USERS_UPDATE:var h=t.root,f=t.other_bot_users;return i({},e,r({},h,i({},e[h],{other_bot_users:[{id:-1,name:u.defaultBot}].concat(o(f))})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE:var m=t.root,g=t.is_log;return i({},e,r({},m,i({},e[m],{show_input:!!g&&e[m].show_input,compilation_messsages:[],fetching_response:!0,log_response:null,sub_response:null})));case s.ActionType.SUB_EDITOR_FETCH_RESPONSE_SUCCESS:var v=t.root,b=t.html,y=t.is_log;return i({},e,r({},v,i({},e[v],{fetching_response:!1,log_response:y?b:e[v].log_response,sub_response:y?e[v].sub_response:b})));case s.ActionType.SUB_EDITOR_UPDATE_COMPILATION_MESSAGE:var C=t.root,E=t.html,S=t.language,O=(0,l.getCompilationErrors)(E,S);return i({},e,r({},C,i({},e[C],{compilation_messages:O})))}return e}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=a;var s=n("r6Ka"),l=n("d6GN"),u=window.CodeEditorText},a80F:function(e,t,n){"use strict";n("V+73"),n("qFbV"),n("2qnb"),n("xCI4"),n("QoCx"),n("1z0e"),n("GEW4"),n("7voC"),n("EzsT"),n("mMMU"),n("hCU/"),n("33AR"),n("h636"),n("DPpf"),n("Wv+O"),n("y1CR"),n("EFXh"),n("0T25"),n("UBkM"),n("ek6K"),n("2i/5"),n("BR1z"),n("zfZq"),n("7H3A"),n("OQLN"),n("xf9h"),n("orD9"),n("Ejne"),n("p4x1"),n("1w4w"),n("fGMu"),n("lqDo"),n("78pI")},bInE:function(e,t,n){"use strict";function o(e){if(localStorage){var t=localStorage.getItem(e);if(null!==t&&"undefined"!==t){return JSON.parse(t)}}return null}function r(e,t){if(localStorage){var n=JSON.stringify(t);return localStorage.setItem(e,n),!0}return!1}function a(e){return!!localStorage&&(localStorage.removeItem(e),!0)}function i(e,t){var n=e.private_url_hash,r=e.is_authenticated,i=g(n,"","lang"),s=o(i);if(s)return r&&a(i),s;if(e.last_lang)return e.last_lang;for(var l=null,u=0;u<e.langs_info.length;u++){var c=e.langs_info[u].id,d=e.lang_source_map[c].last_edited;d&&(null===l||d>l)&&(l=d,s=c)}return s||(t.fav_lang&&h(t.fav_lang,e.langs_info)?t.fav_lang:e.langs_info.length>0?e.langs_info[0].id:null)}function s(e,t){return e+"-"+t}function l(){return o("keybindings")?o("keybindings"):null}function u(e,t){return s(e.p_type,e.problem_id)+"-"+t}function c(e){return e.lang_source_map[e.current_lang]}function d(e,t){for(var n="",o=e.split("\n"),r=!1,a=null,i=0,s=0;s<o.length;s++){var l=o[s];if(/^<readonly>/.test(l))r=!0,a=i;else if(/^<\/readonly>/.test(l)&&r){var u=new O(a,0,i,0);t.push(u),r=!1}else n+=l,s!=o.length-1&&(n+="\n"),i+=1}return n=n.replace(/\r/g,"")}function _(e,t){for(var n="",o={},r=0;r<t.length;r++)o[t[r].start.row]="start",o[t[r].end.row]="end";for(var a=e.split("\n"),i=0;i<a.length;i++){var s=a[i];i in o&&("start"==o[i]?n+="<readonly>\n":(n+="</readonly>",i==a.length-1&&/^\r?$/.test(s)||(n+="\n"))),n+=s,i!=a.length-1&&(n+="\n")}return n}function p(e){return e.map(function(e){return e.clone()})}function h(e,t){return t.some(function(t){return t.id==e})}function f(e){var t=e.split(".");return t.length>1?t.pop():null}function m(e){var t=f(e);return t&&t in E.EXTENSION_TO_LANG_MAP?E.EXTENSION_TO_LANG_MAP[t]:null}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o="";return"delta"==n?o=e+"_delta_"+t:"source"==n?o=e+"_"+t:"lang"==n&&(o=e+"_last_lang"),o}function v(){return jQuery("#login-modal").show(),jQuery("#login-modal").modal({onClose:function(e){e.data.fadeOut(300),e.container.fadeOut(300,function(){e.overlay.hide(),jQuery.modal.close(),jQuery(".modal-window").hide()})},onOpen:function(e){e.overlay.fadeIn(300),e.data.show(),e.container.fadeIn(300)}}),!1}function b(){var e=o(E.CODE_EDITOR_THEME_TOKEN),t=!1;return e&&(t=E.THEME_MAP.some(function(t){return t.value===e})),t?e:null}Object.defineProperty(t,"__esModule",{value:!0}),t.get_from_local_storage=o,t.set_to_local_storage=r,t.remove_from_local_storage=a,t.get_last_lang=i,t.getRoot=s,t.get_last_keybindings=l,t.getSessionId=u,t.getSourceData=c,t.get_source_and_readonly_ranges=d,t.applyReadonlyRangesToSource=_,t.cloneReadonlyRanges=p,t.isLangAllowed=h,t.getExtension=f,t.getLangForFilePath=m,t.getKey=g,t.showLoginModal=v,t.get_last_code_editor_theme=b;var y=n("kX7f"),C=function(e){return e&&e.__esModule?e:{default:e}}(y),E=n("yUpC"),S=C.default.acequire("ace/range"),O=S.Range;window.get_source_and_readonly_ranges=d,window.applyReadonlyRangesToSource=_},cuEl:function(e,t,n){"use strict";function o(e){return C[e]||null}Object.defineProperty(t,"__esModule",{value:!0}),t.getCompleter=o;var r=n("1hYb"),a=n("DX2b"),i=n("UqqS"),s=n("DV9t"),l=n("WPdo"),u=n("hWNS"),c=n("RbMe"),d=n("Hg6N"),_=n("FHh8"),p=n("23X7"),h=n("pf4S"),f=n("BeQ+"),m=n("acbj"),g=n("LMZ2"),v=n("U8Sy"),b=n("ITpG"),y=n("HeRc"),C={C:r.c_completer,CPP:i.cpp_completer,CPP11:i.cpp_completer,CPP14:i.cpp_completer,PYTHON:m.python_completer,PERL:h.perl_completer,PASCAL:p.pascal_completer,JAVA:c.java_completer,JAVA8:c.java_completer,RUBY:v.ruby_completer,GO:l.go_completer,PHP:f.php_completer,CSHARP:s.csharp_completer,LISP:d.lisp_completer,R:g.r_completer,RUST:b.rust_completer,HASKELL:u.haskell_completer,SCALA:y.scala_completer,OBJECTIVEC:_.objectivec_completer,CLOJURE:a.clojure_completer}},d6GN:function(e,t,n){"use strict";function o(e){var t=jQuery("<div/>").html(e),n=t.find("[replaceData=true]");return!(t.find("[replaceData=false]").length>0&&0===n.length||(n.length,0))}function r(e){if(!e)return"";switch(e){case"C":case"CPP":case"CPP14":return/(\d+):\d+: error:(.*)/;case"CSHARP":return/\.cs\((\d+),\d+\): error (.*)/;case"D":return/\.d\((\d+)\): Error: (.*)/;case"ERLANG":return/\.erl:(\d+): (.*)/;case"FSHARP":return/\.fs\((\d+),\d+\): error(.*)/;case"GO":return/\.go:(\d+): (.*)/;case"HASKELL":return/\.hs:(\d+):\d+:(.*)/;case"JAVA":case"JAVA8":return/(\d+): error: (.*)/;case"KOTLIN":return/\.kt:(\d+):\d+: error:(.*)/;case"LISP":return/Error: \(line (\d+)\) (.*)/;case"OBJECTIVEC":return/(\d+):\d+: error: (.*)/;case"OCAML":return/\.ml", line (\d+), characters \d+-\d+:\s*Error:(.*)/;case"PASCAL":return/\.pas\((\d+),\d+\) (.*)/;case"PERL":return/(.+) at .+ line (\d+)/;case"PHP":return/PHP Parse error: (.+) in .+ on line (\d+)/;case"PYTHON":return/\.py", line (\d+)(.*)/;case"PYTHON3":return/\.py3", line (\d+)(.*)/;case"RUBY":return/\.rb:(\d+):(.*)/;case"RUST":return/error: (.+) --> .*\.rs:(\d+):\d+/;case"SCALA":return/\.scala:(\d+): error: (.*)/;case"SWIFT":return/\.swift:(\d+):\d+: error:(.*)/;case"VB":return/\.vb \((\d+),\d+\)\s*:\s*error\s*(.*)/}}function a(e,t){var n=i(e);if(n&&n.length>0)return n;var o=[],a="";if(!e||!t)return o;var s=jQuery("<div/>").html(e),l=s.find(".compile-error-message");if(l.length>0&&(a=l[0].innerText),!a)return o;var u=r(t);if(!u)return o;a=a.replace(/[\r\n]/g,"");var c=u.exec(a);if(!c)return o;var d={PERL:null,PHP:null,RUST:null},_=void 0,p=void 0;t in d?(_=2,p=1):(_=1,p=2);var h=c[p],f=h.length;if(f>70){var m=void 0,g=void 0;for(g=70,m=1;g<f&&m<=5;g+=70,m++)f=h.length,h=[h.slice(0,g),h.slice(g,f)].join("\n");h=h.slice(0,g)}return c&&c.length>0&&o.push({row:Number(c[_])-1,column:1,text:h}),o}function i(e){var t=[];if(!e)return t;var n=jQuery("<div/>").html(e),o=n.find(".exception-json"),r=null;if(o.length>0&&(r=o[0].innerText),!r)return t;var a=JSON.parse(r);if(!a.exception_name)return t;var i=a.line_number?a.line_number:0,s=a.exception_name?a.exception_name:"";return s+=a.exception_message?" : "+a.exception_message:"",t.push({row:i-1,column:1,text:s}),t}function s(e,t){var n="/AJAX/tracelog/submission/{0}/state/{1}/".format(e,t);jQuery.post(n,function(e){})}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldPoll=o,t.getCompilationErrors=a,t.getRuntimeErrors=i,t.log_submission_state=s},ncZi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var o=n("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t.ActionType=(0,r.default)({INIT_CODE_EDITOR:null,SET_SOURCE_IN_CODE_EDITOR:null,CHANGE_SOURCE_IN_CODE_EDITOR:null,CHANGE_CURRENT_LANG_IN_CODE_EDITOR:null,CHANGE_CURRENT_KEYBINDINGS:null,CHANGE_FAVORITE_LANG_IN_CODE_EDITOR:null,SET_CURSOR_POSITION:null,CHANGE_FULL_SCREEN_MODE:null,CHANGE_CURRENT_THEME_IN_CODE_EDITOR:null});t.actions={initCodeEditor:function(e,t){return{type:a.INIT_CODE_EDITOR,root:e,data:t}},setSourceInCodeEditor:function(e,t,n){return{type:a.SET_SOURCE_IN_CODE_EDITOR,root:e,data:t,animate_save:n}},changeSourceInCodeEditor:function(e,t,n){return{type:a.CHANGE_SOURCE_IN_CODE_EDITOR,root:e,source:t,delta:n}},changeCurrentLangInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_LANG_IN_CODE_EDITOR,root:e,lang:t}},changeCurrentKeybindings:function(e,t){return{type:a.CHANGE_CURRENT_KEYBINDINGS,root:e,keybindings:t}},changeFavoriteLang:function(e,t){return{type:a.CHANGE_FAVORITE_LANG_IN_CODE_EDITOR,root:e,fav_lang:t}},setCursorPosition:function(e,t,n){return{type:a.SET_CURSOR_POSITION,root:e,row:t,col:n}},toggleFullScreenMode:function(e,t){return{type:a.CHANGE_FULL_SCREEN_MODE,root:e,is_full_screen:t}},changeCurrentThemeInCodeEditor:function(e,t){return{type:a.CHANGE_CURRENT_THEME_IN_CODE_EDITOR,root:e,code_editor_theme:t}}}},r6Ka:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.actions=t.ActionType=void 0;var o=n("vMAF"),r=function(e){return e&&e.__esModule?e:{default:e}}(o),a=t.ActionType=(0,r.default)({INIT_SUB_EDITOR:null,SUB_EDITOR_SWAP_SHOW_INPUT:null,SUB_EDITOR_CUTSOM_INPUT_CHANGE:null,SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE:null,SUB_EDITOR_OTHER_BOT_USERS_UPDATE:null,SUB_EDITOR_FETCH_RESPONSE:null,SUB_EDITOR_FETCH_RESPONSE_SUCCESS:null,SUB_EDITOR_UPDATE_COMPILATION_MESSAGE:null});t.actions={initSubEditor:function(e){return{type:a.INIT_SUB_EDITOR,root:e}},swapShowInput:function(e){return{type:a.SUB_EDITOR_SWAP_SHOW_INPUT,root:e}},customInputChange:function(e,t){return{type:a.SUB_EDITOR_CUTSOM_INPUT_CHANGE,root:e,value:t}},otherBotUserIdChange:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USER_ID_CHANGE,root:e,user_id:t}},updateOtherBotUsers:function(e,t){return{type:a.SUB_EDITOR_OTHER_BOT_USERS_UPDATE,root:e,other_bot_users:t}},fetchResponse:function(e,t){return{type:a.SUB_EDITOR_FETCH_RESPONSE,root:e,is_log:t}},fetchResponseSuccess:function(e,t,n){return{type:a.SUB_EDITOR_FETCH_RESPONSE_SUCCESS,root:e,html:t,is_log:n}},updateCompilationMessage:function(e,t,n){return{type:a.SUB_EDITOR_UPDATE_COMPILATION_MESSAGE,root:e,html:t,language:n}}}},s0pV:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e,t){return e*Math.pow(2,t)}function l(e,t){var n=2147483648;return(~~(e/n)&~~(t/n))*n+(2147483647&e&t)}function u(e,t){var n=2147483648;return(~~(e/n)|~~(t/n))*n+(2147483647&e|2147483647&t)}function c(e,t,n,o){if(e in window.editorSessions)return o.created=!1,window.editorSessions[e];var r=f.default.createEditSession(t(),n?"ace/mode/"+n:void 0);return window.editorSessions[e]=r,o.created=!0,r}function d(e,t,n){var o=e[t];return e[t]=function(){var t=Array.prototype.slice.call(arguments);return n.call(this,function(){return o.apply(e,t)},t)},e[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.AceEditor=void 0;var _=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),h=n("kX7f"),f=o(h);n("R3yc");var m=n("KSGD"),g=o(m),v=n("GiK3"),b=o(v),y=n("2iM5"),C=o(y),E=f.default.acequire("ace/range"),S=E.Range,O=f.default.acequire("ace/keyboard/hash_handler"),T=O.HashHandler,w=f.default.acequire("ace/document"),R=w.Document,k=f.default.acequire("ace/keyboard/keybinding"),I=k.KeyBinding,N=f.default.acequire("ace/ext/language_tools"),P=N.addCompleter,A=f.default.acequire("ace/autocomplete/util"),L=f.default.acequire("ace/autocomplete"),D=f.default.acequire("ace/virtual_renderer").VirtualRenderer,x=f.default.acequire("ace/editor").Editor,M=f.default.acequire("ace/lib/event"),U=f.default.acequire("ace/lib/lang"),H=f.default.acequire("ace/lib/dom");I.prototype.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,t.length)}};var j=/[a-zA-Z_0-9\.\$\-\u00A2-\uFFFF]/;A.retrievePrecedingIdentifier=function(e,t,n){n=n||j;for(var o=[],r=t-1;r>=0&&n.test(e[r]);r--)o.push(e[r]);return o.reverse().join("")},L.FilteredList.prototype.setFilter=function(e){if(e.length>this.filterText&&0===e.lastIndexOf(this.filterText,0))var t=this.filtered;else var t=this.all;this.filterText=e,t=this.filterCompletions(t,this.filterText),t=t.sort(function(e,t){return t.exactMatch-e.exactMatch||t.score-e.score});var n;try{n=new RegExp(this.filterText)}catch(e){}var o=null;t=t.filter(function(e){var t=e.snippet||e.caption||e.value;return t!==o&&(o=t,n&&n.test(e.value)&&!0)}),this.filtered=t},L.FilteredList.prototype.filterCompletions=function(e,t){var n=[];e:for(var o,r=0;o=e[r];r++){var a=o.value||o.caption||o.snippet;if(a){var i,l,c=-1,d=0,_=0;if(this.exactMatch){if(t!==a.substr(0,t.length))continue e}else{i=a.indexOf(t);for(var p=0;p<t.length;p++){if(i<0)continue e;l=i-c-1,l>0&&(-1===c&&(_+=10),_+=l),d=u(d,s(1,i)),c=i++}}o.matchMask=d,o.exactMatch=_?0:1,o.score=(o.score||0)-_,n.push(o)}}return n},L.Autocomplete.prototype.$init=function(){return this.popup=new B(document.body||document.documentElement),this.popup.on("click",function(e){this.insertMatch(),e.stop()}.bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup};var F=function(e){var t=new D(e);t.$maxLines=4;var n=new x(t);return n.setHighlightActiveLine(!1),n.setShowPrintMargin(!1),n.renderer.setShowGutter(!1),n.renderer.setHighlightGutterLine(!1),n.$mouseHandler.$focusWaitTimout=0,n.$highlightTagPending=!0,n},B=function(e){var t=H.createElement("div"),n=new F(t);e&&e.appendChild(t),t.style.display="none",n.renderer.content.style.cursor="default",n.renderer.setStyle("ace_autocomplete"),n.setOption("displayIndentGuides",!1),n.setOption("dragDelay",150);var o=function(){};n.focus=o,n.$isFocused=!0,n.renderer.$cursorLayer.restartTimer=o,n.renderer.$cursorLayer.element.style.opacity=0,n.renderer.$maxLines=8,n.renderer.$keepTextAreaAtCursor=!1,n.setHighlightActiveLine(!1),n.session.highlight(""),n.session.$searchHighlight.clazz="ace_highlight-marker",n.on("mousedown",function(e){var t=e.getDocumentPosition();n.selection.moveToPosition(t),i.start.row=i.end.row=t.row,e.stop()});var r,a=new S(-1,0,-1,1/0),i=new S(-1,0,-1,1/0);i.id=n.session.addMarker(i,"ace_active-line","fullLine"),n.setSelectOnHover=function(e){e?a.id&&(n.session.removeMarker(a.id),a.id=null):a.id=n.session.addMarker(a,"ace_line-hover","fullLine")},n.setSelectOnHover(!1),n.on("mousemove",function(e){if(!r)return void(r=e);if(r.x!=e.x||r.y!=e.y){r=e,r.scrollTop=n.renderer.scrollTop;var t=r.getDocumentPosition().row;a.start.row!=t&&(a.id||n.setRow(t),c(t))}}),n.renderer.on("beforeRender",function(){if(r&&-1!=a.start.row){r.$pos=null;var e=r.getDocumentPosition().row;a.id||n.setRow(e),c(e,!0)}}),n.renderer.on("afterRender",function(){var e=n.getRow(),t=n.renderer.$textLayer,o=t.element.childNodes[e-t.config.firstRow];o!=t.selectedNode&&(t.selectedNode&&H.removeCssClass(t.selectedNode,"ace_selected"),t.selectedNode=o,o&&H.addCssClass(o,"ace_selected"))});var u=function(){c(-1)},c=function(e,t){e!==a.start.row&&(a.start.row=a.end.row=e,t||n.session._emit("changeBackMarker"),n._emit("changeHoverMarker"))};n.getHoveredRow=function(){return a.start.row},M.addListener(n.container,"mouseout",u),n.on("hide",u),n.on("changeSelection",u),n.session.doc.getLength=function(){return n.data.length},n.session.doc.getLine=function(e){var t=n.data[e];return"string"==typeof t?t:t&&t.value||""};var d=n.session.bgTokenizer;return d.$tokenizeRow=function(e){var t=n.data[e],o=[];if(!t)return o;"string"==typeof t&&(t={value:t}),t.caption||(t.caption=t.value||t.name);for(var r,a,i=-1,u=0;u<t.caption.length;u++)a=t.caption[u],r=l(t.matchMask,s(1,u))?1:0,i!==r?(o.push({type:t.className||(r?"completion-highlight":""),value:a}),i=r):o[o.length-1].value+=a;if(t.meta){var c=n.renderer.$size.scrollerWidth/n.renderer.layerConfig.characterWidth,d=t.meta;d.length+t.caption.length>c-2&&(d=d.substr(0,c-t.caption.length-3)+"…"),o.push({type:"rightAlignedText",value:d})}return o},d.$updateOnChange=o,d.start=o,n.session.$computeWidth=function(){return this.screenWidth=0},n.$blockScrolling=1/0,n.isOpen=!1,n.isTopdown=!1,n.data=[],n.setData=function(e){n.setValue(U.stringRepeat("\n",e.length),-1),n.data=e||[],n.setRow(0)},n.getData=function(e){return n.data[e]},n.getRow=function(){return i.start.row},n.setRow=function(e){e=Math.max(0,Math.min(this.data.length,e)),i.start.row!=e&&(n.selection.clearSelection(),i.start.row=i.end.row=e||0,n.session._emit("changeBackMarker"),n.moveCursorTo(e||0,0),n.isOpen&&n._signal("select"))},n.on("changeSelection",function(){n.isOpen&&n.setRow(n.selection.lead.row),n.renderer.scrollCursorIntoView()}),n.hide=function(){this.container.style.display="none",this._signal("hide"),n.isOpen=!1},n.show=function(e,t,o){var a=this.container,i=window.innerHeight,s=window.innerWidth,l=this.renderer,u=l.$maxLines*t*1.4,c=e.top+this.$borderSize;c>i/2&&!o&&c+t+u>i?(l.$maxPixelHeight=c-2*this.$borderSize,a.style.top="",a.style.bottom=i-c+"px",n.isTopdown=!1):(c+=t,l.$maxPixelHeight=i-c-.2*t,a.style.top=c+"px",a.style.bottom="",n.isTopdown=!0),a.style.display="",this.renderer.$textLayer.checkForSizeChanges();var d=e.left;d+a.offsetWidth>s&&(d=s-a.offsetWidth),a.style.left=d+"px",this._signal("show"),r=null,n.isOpen=!0},n.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},n.$imageSize=0,n.$borderSize=1,n};window.editorSessions={};var G=["minLines","maxLines","readOnly","highlightActiveLine","tabSize","enableBasicAutocompletion","enableLiveAutocompletion","enableSnippets"],K=t.AceEditor=function(e){function t(e){r(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return["onChange","onFocus","onBlur","onCut","onCopy","onPaste","onScroll","handleOptions","onCursorChange","onVimModeChange"].forEach(function(e){n[e]=n[e].bind(n)}),n.getSelectionRange=function(){return n.editor.getSelectionRange()},n.focus=function(){n.editor.focus()},n.setValue=function(e){n.editor.setValue(e),n.editor.session.selection.moveCursorFileStart(),n.editor.focus()},n}return i(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.className,o=t.onBeforeLoad,r=t.mode,a=t.focus,i=t.theme,s=t.fontSize,l=t.sessionId,u=t.value,_=t.cursorStart,p=t.showGutter,h=t.wrapEnabled,m=t.showPrintMargin,g=t.keyboardHandler,v=t.onLoad,b=t.commands,y=t.annotations,C=t.markers;this.editor=f.default.edit(this.refs.editor),this.editor.$blockScrolling=1/0;var E=new T;if(E.handleKeyboard=function(t,n,o,r,a){if(e.props.keyboardHandlerFunction)return e.props.keyboardHandlerFunction(t,n,o,r,a)},this.editor.keyBinding.addKeyboardHandler(E,0),this.props.onEditorCreation&&this.props.onEditorCreation(this.editor),l){var S={},O=c(l,this.createNewDocument.bind(this,l,u),r,S);this.editor.setSession(O),S.created&&this.props.onSessionCreation&&this.props.onSessionCreation(this.props.sessionId,this.editor.getSession())}o&&o(f.default);for(var w=Object.keys(this.props.editorProps),R=0;R<w.length;R++)this.editor[w[R]]=this.props.editorProps[w[R]];l||this.editor.getSession().setMode("ace/mode/"+r),this.editor.setTheme("ace/theme/"+i),this.editor.setFontSize(s),l||this.editor.setValue(u,_),this.editor.renderer.setShowGutter(p),this.editor.getSession().setUseWrapMode(h),this.editor.setShowPrintMargin(m),this.editor.on("focus",this.onFocus),this.editor.on("blur",this.onBlur),d(this.editor,"onCut",this.onCut),d(this.editor,"onCopy",this.onCopy),d(this.editor,"onPaste",this.onPaste),d(this.editor,"onCursorChange",this.onCursorChange),this.editor.on("change",this.onChange),this.editor.session.on("changeScrollTop",this.onScroll),this.handleOptions(this.props),this.editor.getSession().setAnnotations(y||[]),this.handleMarkers(C||[]),this.props.completer&&P(this.props.completer);for(var k=this.editor.$options,I=0;I<G.length;I++){var N=G[I];k.hasOwnProperty(N)&&this.editor.setOption(N,this.props[N])}Array.isArray(b)&&b.forEach(function(t){e.editor.commands.addCommand(t)}),g&&(this.editor.setKeyboardHandler("ace/keyboard/"+g),"vim"==g&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),n&&(this.refs.editor.className+=" "+n),a&&this.editor.focus(),v&&v(this.editor)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props;if(e.sessionId!=t.sessionId){var n={},o=c(e.sessionId,this.createNewDocument.bind(this,e.sessionId,e.value),e.mode,n);this.editor.setSession(o),this.editor.focus(),n.created&&this.props.onSessionCreation&&this.props.onSessionCreation(e.sessionId,this.editor.getSession())}for(var r=0;r<G.length;r++){var a=G[r];e[a]!==t[a]&&this.editor.setOption(a,e[a])}if(e.className!==t.className){var i=this.refs.editor.className,s=i.trim().split(" ");t.className.trim().split(" ").forEach(function(e){var t=s.indexOf(e);s.splice(t,1)}),this.refs.editor.className=" "+e.className+" "+s.join(" ")}if(e.theme!==t.theme&&this.editor.setTheme("ace/theme/"+e.theme),e.keyboardHandler!==t.keyboardHandler&&(this.editor.setKeyboardHandler(e.keyboardHandler?"ace/keyboard/"+e.keyboardHandler:null),"vim"==e.keyboardHandler&&this.editor.state.cm.on("vim-mode-change",this.onVimModeChange)),e.fontSize!==t.fontSize&&this.editor.setFontSize(e.fontSize),e.wrapEnabled!==t.wrapEnabled&&this.editor.getSession().setUseWrapMode(e.wrapEnabled),e.showPrintMargin!==t.showPrintMargin&&this.editor.setShowPrintMargin(e.showPrintMargin),e.showGutter!==t.showGutter&&this.editor.renderer.setShowGutter(e.showGutter),(0,C.default)(e.setOptions,t.setOptions)||this.handleOptions(e),(0,C.default)(e.annotations,t.annotations)||this.editor.getSession().setAnnotations(e.annotations||[]),(0,C.default)(e.markers,t.markers)||this.handleMarkers(e.markers||[]),this.editor&&this.editor.getValue()!==e.value){this.silent=!0;var l=this.editor.session.selection.toJSON();this.editor.setValue(e.value,e.cursorStart),this.editor.session.selection.fromJSON(l),this.silent=!1}e.focus&&!t.focus&&this.editor.focus(),e.height!==this.props.height&&this.editor.resize(),e.completer&&e.completer!=t.completer&&P(e.completer)}},{key:"componentWillUnmount",value:function(){this.editor.setSession(null),this.editor.destroy(),this.editor=null}},{key:"createNewDocument",value:function(e,t){var n=new R(t);return this.props.onDocumentCreation&&this.props.onDocumentCreation(e,n),n}},{key:"onChange",value:function(e){if(this.props.onChange&&!this.silent){var t=this.editor.getValue();this.props.onChange(t,e)}}},{key:"onFocus",value:function(){this.props.onFocus&&this.props.onFocus()}},{key:"onBlur",value:function(){this.props.onBlur&&this.props.onBlur()}},{key:"onCut",value:function(e,t){if(this.props.onCut){!0===this.props.onCut(t[0])&&e()}else e()}},{key:"onCopy",value:function(e,t){if(this.props.onCopy){!0===this.props.onCopy(t[0])&&e()}else e()}},{key:"onPaste",value:function(e,t){if(this.props.onPaste){!0===this.props.onPaste(t[0])&&e()}else e()}},{key:"onCursorChange",value:function(e){if(e(),this.props.onCursorChange){var t=this.editor.getCursorPosition(),n=t.row,o=t.column;this.props.onCursorChange(n,o)}}},{key:"onVimModeChange",value:function(e){this.props.onVimModeChange&&this.props.onVimModeChange(e.mode)}},{key:"onScroll",value:function(){this.props.onScroll&&this.props.onScroll(this.editor)}},{key:"handleOptions",value:function(e){for(var t=Object.keys(e.setOptions),n=0;n<t.length;n++)this.editor.setOption(t[n],e.setOptions[t[n]])}},{key:"handleMarkers",value:function(e){var t=this,n=this.editor.getSession().getMarkers(!0);for(var o in n)n.hasOwnProperty(o)&&this.editor.getSession().removeMarker(n[o].id);n=this.editor.getSession().getMarkers(!1);for(var r in n)n.hasOwnProperty(r)&&this.editor.getSession().removeMarker(n[r].id);e.forEach(function(e){var n=e.startRow,o=e.startCol,r=e.endRow,a=e.endCol,i=e.className,s=e.type,l=e.inFront,u=void 0!==l&&l,c=new S(n,o,r,a);t.editor.getSession().addMarker(c,i,s,u)})}},{key:"isVimInInsertMode",value:function(){return!(!this.editor.state||!this.editor.state.cm.state.vim.insertMode)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.width,o=e.height,r=e.style,a=_({width:n,height:o},r);return b.default.createElement("div",{ref:"editor",id:t,style:a})}}]),t}(v.PureComponent);K.propTypes={mode:g.default.string,focus:g.default.bool,theme:g.default.string,name:g.default.string,sessionId:g.default.string,className:g.default.string,height:g.default.string,width:g.default.string,fontSize:g.default.number,showGutter:g.default.bool,onChange:g.default.func,onCut:g.default.func,onCopy:g.default.func,onPaste:g.default.func,onFocus:g.default.func,onBlur:g.default.func,onScroll:g.default.func,value:g.default.string,onLoad:g.default.func,onCursorChange:g.default.func,onBeforeLoad:g.default.func,minLines:g.default.number,maxLines:g.default.number,readOnly:g.default.bool,highlightActiveLine:g.default.bool,tabSize:g.default.number,showPrintMargin:g.default.bool,cursorStart:g.default.number,editorProps:g.default.object,setOptions:g.default.object,annotations:g.default.array,markers:g.default.array,keyboardHandler:g.default.string,wrapEnabled:g.default.bool,enableBasicAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),enableLiveAutocompletion:g.default.oneOfType([g.default.bool,g.default.array]),commands:g.default.array,onEditorCreation:g.default.func,onSessionCreation:g.default.func,onDocumentCreation:g.default.func,keyboardHandlerFunction:g.default.func,completer:g.default.object,onVimModeChange:g.default.func},K.defaultProps={name:"brace-editor",focus:!1,mode:"",theme:"",height:"500px",width:"500px",value:"",fontSize:12,showGutter:!0,onChange:null,onPaste:null,onLoad:null,onScroll:null,minLines:null,maxLines:null,readOnly:!1,highlightActiveLine:!0,showPrintMargin:!0,tabSize:4,cursorStart:1,editorProps:{},setOptions:{},wrapEnabled:!1,enableBasicAutocompletion:!1,enableLiveAutocompletion:!1,onEditorCreation:null,onSessionCreation:null,onDocumentCreation:null,keyboardHandlerFunction:null,completer:null,onVimModeChange:null}},yUpC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LANG_MODE_MAP={BASH:"sh",C:"c_cpp",CPP:"c_cpp",CPP11:"c_cpp",CPP14:"c_cpp",PYTHON:"python",PYTHON3:"python",PERL:"perl",PASCAL:"pascal",JAVA:"java",JAVA8:"java",RUBY:"ruby",GO:"golang",PHP:"php",CSHARP:"csharp",FSHARP:"csharp",HTML:"html",CSS:"css",JAVASCRIPT:"javascript",JAVASCRIPT_UI:"javascript",JAVASCRIPT_NODE:"javascript",HASKELL:"haskell",CLOJURE:"clojure",SCALA:"scala",TEXTFILE:"html",BEFUNGE:"c_cpp",LOLCODE:"c_cpp",WHENEVER:"c_cpp",OBJECTIVEC:"objectivec",LISP:"lisp",RACKET:"lisp",LISP_SBCL:"lisp",R:"r",RUST:"rust",MYSQL:"mysql",POSTGRESQL:"pgsql",MSSQL:"sqlserver",LUA:"lua",GROOVY:"groovy",D:"d",ERLANG:"erlang",JULIA:"julia",OCAML:"ocaml",OCTAVE:"matlab",SWIFT:"swift",SWIFT_4_1:"swift",ORACLE_DB:"sql",KOTLIN:"kotlin"},t.EXTENSION_TO_LANG_MAP={sh:"BASH",bf:"BEFUNGE",c:"C",clj:"CLOJURE",cpp:"CPP",cpp11:"CPP11",cpp14:"CPP14",cs:"CSHARP",css:"CSS",d:"D",erl:"ERLANG",fs:"FSHARP",go:"GO",groovy:"GROOVY",hs:"HASKELL",html:"HTML",java:"JAVA",java8:"JAVA8",jl:"JULIA",js:"JAVASCRIPT",kt:"KOTLIN",kts:"KOTLIN",lisp:"LISP_SBCL",lol:"LOLCODE",lua:"LUA",m:"OBJECTIVEC",ml:"OCAML",mssql:"MSSQL",njs:"JAVASCRIPT_NODE",oct:"OCTAVE",pas:"PASCAL",php:"PHP",pl:"PERL",psql:"POSTGRESQL",py:"PYTHON",py3:"PYTHON3",r:"R",rb:"RUBY",rkt:"RACKET",rs:"RUST",scala:"SCALA",scm:"LISP",sql:"MYSQL",swift:"SWIFT",teen:"WHENEVER",txt:"TEXTFILE",vb:"VB",oracle:"ORACLE"},t.THEME_MAP=[{name:CodeEditorText.lightTheme,value:"crimson_editor",type:"light"},{name:CodeEditorText.darkTheme,value:"monokai",type:"dark"}],t.DEFAULT_CODE_EDITOR_THEME="monokai",t.CODE_EDITOR_THEME_TOKEN="code_editor_theme_token"},yqcu:function(e,t,n){"use strict";function o(e,t){return void 0===t&&(t={}),e in r?(t.created=!1,r[e]):(r[e]=[],t.created=!0,r[e])}Object.defineProperty(t,"__esModule",{value:!0}),t.getOrCreateReadonlyRanges=o,window.SessionIdReadonlyRangesMap={};var r=window.SessionIdReadonlyRangesMap},zp53:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={sub_editors:{}}}},["H2Zf"]);
//# sourceMappingURL=sub-editor.js.map